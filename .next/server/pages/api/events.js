"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/events";
exports.ids = ["pages/api/events"];
exports.modules = {

/***/ "(api-node)/./models/EmailEvent.js":
/*!******************************!*\
  !*** ./models/EmailEvent.js ***!
  \******************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Campaign: () => (/* binding */ Campaign),\n/* harmony export */   EmailEvent: () => (/* binding */ EmailEvent),\n/* harmony export */   User: () => (/* binding */ User)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n\n// User model\nconst UserSchema = mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({\n    name: {\n        type: String,\n        required: true\n    },\n    email: {\n        type: String,\n        required: true,\n        unique: true\n    },\n    password: {\n        type: String,\n        required: true\n    },\n    company: {\n        type: String,\n        required: true\n    },\n    createdAt: {\n        type: Date,\n        default: Date.now\n    },\n    activated: {\n        type: Boolean,\n        required: true\n    },\n    class: {\n        type: String,\n        required: true\n    },\n    currentflow: {\n        type: String\n    }\n});\nconst User = mongoose__WEBPACK_IMPORTED_MODULE_0__.models.User || mongoose__WEBPACK_IMPORTED_MODULE_0__.model('User', UserSchema);\n// Campaign model\nconst CampaignSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({\n    user: {\n        type: mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.ObjectId,\n        ref: 'User',\n        required: true\n    },\n    name: {\n        type: String,\n        required: true\n    },\n    description: {\n        type: String\n    },\n    createdAt: {\n        type: Date,\n        default: Date.now\n    }\n});\nconst Campaign = mongoose__WEBPACK_IMPORTED_MODULE_0__.models.Campaign || mongoose__WEBPACK_IMPORTED_MODULE_0__.model('Campaign', CampaignSchema);\n// Email event model\nconst EmailEventSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({\n    user: {\n        type: mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.ObjectId,\n        ref: 'User',\n        required: true\n    },\n    campaign: {\n        type: mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.ObjectId,\n        ref: 'Campaign',\n        required: true\n    },\n    type: {\n        type: String,\n        required: true\n    },\n    recipient: {\n        type: String,\n        required: true\n    },\n    company: {\n        type: String,\n        required: true\n    },\n    linkClicked: {\n        type: String\n    },\n    ipAddress: {\n        type: String\n    },\n    userAgent: {\n        type: String\n    },\n    timestamp: {\n        type: Date,\n        default: Date.now\n    }\n});\nconst EmailEvent = mongoose__WEBPACK_IMPORTED_MODULE_0__.models.EmailEvent || mongoose__WEBPACK_IMPORTED_MODULE_0__.model('EmailEvent', EmailEventSchema);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL21vZGVscy9FbWFpbEV2ZW50LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBZ0M7QUFFaEMsYUFBYTtBQUNiLE1BQU1DLGFBQWFELDRDQUFlLENBQUM7SUFDakNHLE1BQU07UUFBRUMsTUFBTUM7UUFBUUMsVUFBVTtJQUFLO0lBQ3JDQyxPQUFPO1FBQUVILE1BQU1DO1FBQVFDLFVBQVU7UUFBTUUsUUFBUTtJQUFLO0lBQ3BEQyxVQUFVO1FBQUVMLE1BQU1DO1FBQVFDLFVBQVU7SUFBSztJQUN6Q0ksU0FBUztRQUFFTixNQUFNQztRQUFRQyxVQUFVO0lBQUs7SUFDeENLLFdBQVc7UUFBRVAsTUFBTVE7UUFBTUMsU0FBU0QsS0FBS0UsR0FBRztJQUFDO0lBQzNDQyxXQUFXO1FBQUNYLE1BQUtZO1FBQVNWLFVBQVU7SUFBSTtJQUN4Q1csT0FBTztRQUFDYixNQUFLQztRQUFRQyxVQUFVO0lBQUk7SUFDbkNZLGFBQWE7UUFBQ2QsTUFBTUM7SUFBTTtBQUM1QjtBQUVBLE1BQU1jLE9BQU9uQiw0Q0FBZSxDQUFDbUIsSUFBSSxJQUFJbkIsMkNBQWMsQ0FBQyxRQUFRQztBQUU1RCxpQkFBaUI7QUFDakIsTUFBTXFCLGlCQUFpQixJQUFJdEIsNENBQWUsQ0FBQztJQUN6Q3VCLE1BQU07UUFBRW5CLE1BQU1KLDRDQUFlLENBQUN3QixLQUFLLENBQUNDLFFBQVE7UUFBRUMsS0FBSztRQUFRcEIsVUFBVTtJQUFLO0lBQzFFSCxNQUFNO1FBQUVDLE1BQU1DO1FBQVFDLFVBQVU7SUFBSztJQUNyQ3FCLGFBQWE7UUFBRXZCLE1BQU1DO0lBQU87SUFDNUJNLFdBQVc7UUFBRVAsTUFBTVE7UUFBTUMsU0FBU0QsS0FBS0UsR0FBRztJQUFDO0FBQzdDO0FBRUEsTUFBTWMsV0FBVzVCLDRDQUFlLENBQUM0QixRQUFRLElBQUk1QiwyQ0FBYyxDQUFDLFlBQVlzQjtBQUV4RSxvQkFBb0I7QUFDcEIsTUFBTU8sbUJBQW1CLElBQUk3Qiw0Q0FBZSxDQUFDO0lBQzNDdUIsTUFBTTtRQUFFbkIsTUFBTUosNENBQWUsQ0FBQ3dCLEtBQUssQ0FBQ0MsUUFBUTtRQUFFQyxLQUFLO1FBQVFwQixVQUFVO0lBQUs7SUFDMUV3QixVQUFVO1FBQUUxQixNQUFNSiw0Q0FBZSxDQUFDd0IsS0FBSyxDQUFDQyxRQUFRO1FBQUVDLEtBQUs7UUFBWXBCLFVBQVU7SUFBSztJQUNsRkYsTUFBTTtRQUFFQSxNQUFNQztRQUFRQyxVQUFVO0lBQUs7SUFDckN5QixXQUFXO1FBQUUzQixNQUFNQztRQUFRQyxVQUFVO0lBQUs7SUFDMUNJLFNBQVM7UUFBRU4sTUFBTUM7UUFBUUMsVUFBVTtJQUFLO0lBQ3hDMEIsYUFBYTtRQUFFNUIsTUFBTUM7SUFBTztJQUM1QjRCLFdBQVc7UUFBRTdCLE1BQU1DO0lBQU87SUFDMUI2QixXQUFXO1FBQUM5QixNQUFLQztJQUFNO0lBQ3ZCOEIsV0FBVztRQUFFL0IsTUFBTVE7UUFBTUMsU0FBU0QsS0FBS0UsR0FBRztJQUFDO0FBQzdDO0FBRUEsTUFBTXNCLGFBQWFwQyw0Q0FBZSxDQUFDb0MsVUFBVSxJQUFJcEMsMkNBQWMsQ0FBQyxjQUFjNkI7QUFFeEMiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcYW5zaHZcXERvd25sb2Fkc1xcbWFpbF90cmFja2VyX2VuZHBvaW50c1xcbW9kZWxzXFxFbWFpbEV2ZW50LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb25nb29zZSBmcm9tICdtb25nb29zZSc7XHJcblxyXG4vLyBVc2VyIG1vZGVsXHJcbmNvbnN0IFVzZXJTY2hlbWEgPSBtb25nb29zZS5TY2hlbWEoe1xyXG4gIG5hbWU6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSB9LFxyXG4gIGVtYWlsOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUsIHVuaXF1ZTogdHJ1ZSB9LFxyXG4gIHBhc3N3b3JkOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUgfSxcclxuICBjb21wYW55OiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUgfSxcclxuICBjcmVhdGVkQXQ6IHsgdHlwZTogRGF0ZSwgZGVmYXVsdDogRGF0ZS5ub3cgfSwgXHJcbiAgYWN0aXZhdGVkOiB7dHlwZTpCb29sZWFuLCByZXF1aXJlZDogdHJ1ZX0sXHJcbiAgY2xhc3M6IHt0eXBlOlN0cmluZywgcmVxdWlyZWQ6IHRydWV9LFxyXG4gIGN1cnJlbnRmbG93OiB7dHlwZTogU3RyaW5nfSxcclxufSk7XHJcblxyXG5jb25zdCBVc2VyID0gbW9uZ29vc2UubW9kZWxzLlVzZXIgfHwgbW9uZ29vc2UubW9kZWwoJ1VzZXInLCBVc2VyU2NoZW1hKTtcclxuXHJcbi8vIENhbXBhaWduIG1vZGVsXHJcbmNvbnN0IENhbXBhaWduU2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYSh7XHJcbiAgdXNlcjogeyB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsIHJlZjogJ1VzZXInLCByZXF1aXJlZDogdHJ1ZSB9LFxyXG4gIG5hbWU6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSB9LFxyXG4gIGRlc2NyaXB0aW9uOiB7IHR5cGU6IFN0cmluZyB9LFxyXG4gIGNyZWF0ZWRBdDogeyB0eXBlOiBEYXRlLCBkZWZhdWx0OiBEYXRlLm5vdyB9LFxyXG59KTtcclxuXHJcbmNvbnN0IENhbXBhaWduID0gbW9uZ29vc2UubW9kZWxzLkNhbXBhaWduIHx8IG1vbmdvb3NlLm1vZGVsKCdDYW1wYWlnbicsIENhbXBhaWduU2NoZW1hKTtcclxuXHJcbi8vIEVtYWlsIGV2ZW50IG1vZGVsXHJcbmNvbnN0IEVtYWlsRXZlbnRTY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKHtcclxuICB1c2VyOiB7IHR5cGU6IG1vbmdvb3NlLlNjaGVtYS5UeXBlcy5PYmplY3RJZCwgcmVmOiAnVXNlcicsIHJlcXVpcmVkOiB0cnVlIH0sXHJcbiAgY2FtcGFpZ246IHsgdHlwZTogbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk9iamVjdElkLCByZWY6ICdDYW1wYWlnbicsIHJlcXVpcmVkOiB0cnVlIH0sXHJcbiAgdHlwZTogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sIC8vICdvcGVuJywgJ2NsaWNrJ1xyXG4gIHJlY2lwaWVudDogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXHJcbiAgY29tcGFueTogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXHJcbiAgbGlua0NsaWNrZWQ6IHsgdHlwZTogU3RyaW5nIH0sIC8vIE9ubHkgZm9yICdjbGljaycgZXZlbnRzXHJcbiAgaXBBZGRyZXNzOiB7IHR5cGU6IFN0cmluZyB9LFxyXG4gIHVzZXJBZ2VudDoge3R5cGU6U3RyaW5nfSxcclxuICB0aW1lc3RhbXA6IHsgdHlwZTogRGF0ZSwgZGVmYXVsdDogRGF0ZS5ub3cgfVxyXG59KTtcclxuXHJcbmNvbnN0IEVtYWlsRXZlbnQgPSBtb25nb29zZS5tb2RlbHMuRW1haWxFdmVudCB8fCBtb25nb29zZS5tb2RlbCgnRW1haWxFdmVudCcsIEVtYWlsRXZlbnRTY2hlbWEpO1xyXG5cclxuZXhwb3J0IHsgVXNlciwgQ2FtcGFpZ24sIEVtYWlsRXZlbnQgfTsiXSwibmFtZXMiOlsibW9uZ29vc2UiLCJVc2VyU2NoZW1hIiwiU2NoZW1hIiwibmFtZSIsInR5cGUiLCJTdHJpbmciLCJyZXF1aXJlZCIsImVtYWlsIiwidW5pcXVlIiwicGFzc3dvcmQiLCJjb21wYW55IiwiY3JlYXRlZEF0IiwiRGF0ZSIsImRlZmF1bHQiLCJub3ciLCJhY3RpdmF0ZWQiLCJCb29sZWFuIiwiY2xhc3MiLCJjdXJyZW50ZmxvdyIsIlVzZXIiLCJtb2RlbHMiLCJtb2RlbCIsIkNhbXBhaWduU2NoZW1hIiwidXNlciIsIlR5cGVzIiwiT2JqZWN0SWQiLCJyZWYiLCJkZXNjcmlwdGlvbiIsIkNhbXBhaWduIiwiRW1haWxFdmVudFNjaGVtYSIsImNhbXBhaWduIiwicmVjaXBpZW50IiwibGlua0NsaWNrZWQiLCJpcEFkZHJlc3MiLCJ1c2VyQWdlbnQiLCJ0aW1lc3RhbXAiLCJFbWFpbEV2ZW50Il0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./models/EmailEvent.js\n");

/***/ }),

/***/ "(api-node)/./mongodb.js":
/*!********************!*\
  !*** ./mongodb.js ***!
  \********************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   connectToDatabase: () => (/* binding */ connectToDatabase)\n/* harmony export */ });\n/* harmony import */ var dotenv_config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! dotenv/config */ \"dotenv/config\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n\n\nconst MONGODB_URI = process.env.MONGODB_URI;\nif (!MONGODB_URI) {\n    throw new Error('Please define the MONGODB_URI environment variable');\n}\n/**\r\n * Global is used here to maintain a cached connection across hot reloads\r\n * in development. This prevents connections growing exponentially\r\n * during API Route usage.\r\n */ let cached = global.mongoose;\nif (!cached) {\n    cached = global.mongoose = {\n        conn: null,\n        promise: null\n    };\n}\nasync function connectToDatabase() {\n    if (cached.conn) {\n        return cached.conn;\n    }\n    if (!cached.promise) {\n        const opts = {\n            serverSelectionTimeoutMS: 5000,\n            socketTimeoutMS: 45000\n        };\n        cached.promise = mongoose__WEBPACK_IMPORTED_MODULE_1__.connect(MONGODB_URI, opts).then((mongoose)=>{\n            console.log('Successfully connected to MongoDB.');\n            return mongoose;\n        }).catch((error)=>{\n            console.error('MongoDB connection error:', error);\n            throw error;\n        });\n    }\n    try {\n        cached.conn = await cached.promise;\n        return cached.conn;\n    } catch (error) {\n        cached.promise = null;\n        throw error;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL21vbmdvZGIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXVCO0FBQ1M7QUFFaEMsTUFBTUMsY0FBY0MsUUFBUUMsR0FBRyxDQUFDRixXQUFXO0FBRTNDLElBQUksQ0FBQ0EsYUFBYTtJQUNoQixNQUFNLElBQUlHLE1BQU07QUFDbEI7QUFFQTs7OztDQUlDLEdBQ0QsSUFBSUMsU0FBU0MsT0FBT04sUUFBUTtBQUU1QixJQUFJLENBQUNLLFFBQVE7SUFDWEEsU0FBU0MsT0FBT04sUUFBUSxHQUFHO1FBQUVPLE1BQU07UUFBTUMsU0FBUztJQUFLO0FBQ3pEO0FBRU8sZUFBZUM7SUFDcEIsSUFBSUosT0FBT0UsSUFBSSxFQUFFO1FBQ2YsT0FBT0YsT0FBT0UsSUFBSTtJQUNwQjtJQUVBLElBQUksQ0FBQ0YsT0FBT0csT0FBTyxFQUFFO1FBQ25CLE1BQU1FLE9BQU87WUFDWEMsMEJBQTBCO1lBQzFCQyxpQkFBaUI7UUFDbkI7UUFFQVAsT0FBT0csT0FBTyxHQUFHUiw2Q0FBZ0IsQ0FBQ0MsYUFBYVMsTUFDNUNJLElBQUksQ0FBQ2QsQ0FBQUE7WUFDSmUsUUFBUUMsR0FBRyxDQUFDO1lBQ1osT0FBT2hCO1FBQ1QsR0FDQ2lCLEtBQUssQ0FBQ0MsQ0FBQUE7WUFDTEgsUUFBUUcsS0FBSyxDQUFDLDZCQUE2QkE7WUFDM0MsTUFBTUE7UUFDUjtJQUNKO0lBRUEsSUFBSTtRQUNGYixPQUFPRSxJQUFJLEdBQUcsTUFBTUYsT0FBT0csT0FBTztRQUNsQyxPQUFPSCxPQUFPRSxJQUFJO0lBQ3BCLEVBQUUsT0FBT1csT0FBTztRQUNkYixPQUFPRyxPQUFPLEdBQUc7UUFDakIsTUFBTVU7SUFDUjtBQUNGIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGFuc2h2XFxEb3dubG9hZHNcXG1haWxfdHJhY2tlcl9lbmRwb2ludHNcXG1vbmdvZGIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICdkb3RlbnYvY29uZmlnJztcclxuaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJztcclxuXHJcbmNvbnN0IE1PTkdPREJfVVJJID0gcHJvY2Vzcy5lbnYuTU9OR09EQl9VUkk7XHJcblxyXG5pZiAoIU1PTkdPREJfVVJJKSB7XHJcbiAgdGhyb3cgbmV3IEVycm9yKCdQbGVhc2UgZGVmaW5lIHRoZSBNT05HT0RCX1VSSSBlbnZpcm9ubWVudCB2YXJpYWJsZScpO1xyXG59XHJcblxyXG4vKipcclxuICogR2xvYmFsIGlzIHVzZWQgaGVyZSB0byBtYWludGFpbiBhIGNhY2hlZCBjb25uZWN0aW9uIGFjcm9zcyBob3QgcmVsb2Fkc1xyXG4gKiBpbiBkZXZlbG9wbWVudC4gVGhpcyBwcmV2ZW50cyBjb25uZWN0aW9ucyBncm93aW5nIGV4cG9uZW50aWFsbHlcclxuICogZHVyaW5nIEFQSSBSb3V0ZSB1c2FnZS5cclxuICovXHJcbmxldCBjYWNoZWQgPSBnbG9iYWwubW9uZ29vc2U7XHJcblxyXG5pZiAoIWNhY2hlZCkge1xyXG4gIGNhY2hlZCA9IGdsb2JhbC5tb25nb29zZSA9IHsgY29ubjogbnVsbCwgcHJvbWlzZTogbnVsbCB9O1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY29ubmVjdFRvRGF0YWJhc2UoKSB7XHJcbiAgaWYgKGNhY2hlZC5jb25uKSB7XHJcbiAgICByZXR1cm4gY2FjaGVkLmNvbm47XHJcbiAgfVxyXG5cclxuICBpZiAoIWNhY2hlZC5wcm9taXNlKSB7XHJcbiAgICBjb25zdCBvcHRzID0ge1xyXG4gICAgICBzZXJ2ZXJTZWxlY3Rpb25UaW1lb3V0TVM6IDUwMDAsXHJcbiAgICAgIHNvY2tldFRpbWVvdXRNUzogNDUwMDAsXHJcbiAgICB9O1xyXG5cclxuICAgIGNhY2hlZC5wcm9taXNlID0gbW9uZ29vc2UuY29ubmVjdChNT05HT0RCX1VSSSwgb3B0cylcclxuICAgICAgLnRoZW4obW9uZ29vc2UgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdTdWNjZXNzZnVsbHkgY29ubmVjdGVkIHRvIE1vbmdvREIuJyk7XHJcbiAgICAgICAgcmV0dXJuIG1vbmdvb3NlO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goZXJyb3IgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ01vbmdvREIgY29ubmVjdGlvbiBlcnJvcjonLCBlcnJvcik7XHJcbiAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuICBcclxuICB0cnkge1xyXG4gICAgY2FjaGVkLmNvbm4gPSBhd2FpdCBjYWNoZWQucHJvbWlzZTtcclxuICAgIHJldHVybiBjYWNoZWQuY29ubjtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY2FjaGVkLnByb21pc2UgPSBudWxsO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJtb25nb29zZSIsIk1PTkdPREJfVVJJIiwicHJvY2VzcyIsImVudiIsIkVycm9yIiwiY2FjaGVkIiwiZ2xvYmFsIiwiY29ubiIsInByb21pc2UiLCJjb25uZWN0VG9EYXRhYmFzZSIsIm9wdHMiLCJzZXJ2ZXJTZWxlY3Rpb25UaW1lb3V0TVMiLCJzb2NrZXRUaW1lb3V0TVMiLCJjb25uZWN0IiwidGhlbiIsImNvbnNvbGUiLCJsb2ciLCJjYXRjaCIsImVycm9yIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./mongodb.js\n");

/***/ }),

/***/ "(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fevents&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cevents.js&middlewareConfigBase64=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fevents&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cevents.js&middlewareConfigBase64=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/pages-api/module.compiled */ \"(api-node)/./node_modules/next/dist/server/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(api-node)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api-node)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_events_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\events.js */ \"(api-node)/./pages/api/events.js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_events_js__WEBPACK_IMPORTED_MODULE_3__, 'default'));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_events_js__WEBPACK_IMPORTED_MODULE_3__, 'config');\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/events\",\n        pathname: \"/api/events\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    userland: _pages_api_events_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL25leHQtcm91dGUtbG9hZGVyL2luZGV4LmpzP2tpbmQ9UEFHRVNfQVBJJnBhZ2U9JTJGYXBpJTJGZXZlbnRzJnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGcGFnZXMlNUNhcGklNUNldmVudHMuanMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQStGO0FBQ3ZDO0FBQ0U7QUFDMUQ7QUFDb0Q7QUFDcEQ7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLGlEQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyxpREFBUTtBQUNwQztBQUNPLHdCQUF3Qix5R0FBbUI7QUFDbEQ7QUFDQSxjQUFjLGtFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQiLCJzb3VyY2VzIjpbIiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzXFxcXGFwaVxcXFxldmVudHMuanNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgJ2RlZmF1bHQnKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsICdjb25maWcnKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2V2ZW50c1wiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2V2ZW50c1wiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6ICcnLFxuICAgICAgICBmaWxlbmFtZTogJydcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fevents&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cevents.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api-node)/./pages/api/events.js":
/*!*****************************!*\
  !*** ./pages/api/events.js ***!
  \*****************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _mongodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../mongodb */ \"(api-node)/./mongodb.js\");\n/* harmony import */ var _models_EmailEvent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../models/EmailEvent */ \"(api-node)/./models/EmailEvent.js\");\n\n\nasync function handler(req, res) {\n    if (req.method !== 'GET') {\n        return res.status(405).json({\n            error: 'Method not allowed'\n        });\n    }\n    try {\n        const { campaignId } = req.query;\n        if (!campaignId) {\n            return res.status(400).json({\n                error: 'Campaign ID is required'\n            });\n        }\n        await (0,_mongodb__WEBPACK_IMPORTED_MODULE_0__.connectToDatabase)();\n        // Get all events for the campaign, sorted by timestamp\n        // Fix: Use correct field for campaign filtering\n        const events = await _models_EmailEvent__WEBPACK_IMPORTED_MODULE_1__.EmailEvent.find({\n            campaign: campaignId\n        }).sort({\n            timestamp: -1\n        }).limit(1000); // Limit to last 1000 events for performance\n        return res.status(200).json(events);\n    } catch (error) {\n        console.error('Error fetching events:', error);\n        return res.status(500).json({\n            error: 'Internal server error'\n        });\n    }\n}\n// Helper function to get device info\nfunction getDeviceInfo(userAgent) {\n    if (!userAgent) return 'Unknown';\n    if (userAgent.includes('iPhone') || userAgent.includes('iPad')) return 'iOS';\n    if (userAgent.includes('Android')) return 'Android';\n    if (userAgent.includes('Windows')) return 'Windows';\n    if (userAgent.includes('Mac')) return 'Mac';\n    return 'Unknown';\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3BhZ2VzL2FwaS9ldmVudHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQWtEO0FBQ0c7QUFFdEMsZUFBZUUsUUFBUUMsR0FBRyxFQUFFQyxHQUFHO0lBQzVDLElBQUlELElBQUlFLE1BQU0sS0FBSyxPQUFPO1FBQ3hCLE9BQU9ELElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFBRUMsT0FBTztRQUFxQjtJQUM1RDtJQUVBLElBQUk7UUFDRixNQUFNLEVBQUVDLFVBQVUsRUFBRSxHQUFHTixJQUFJTyxLQUFLO1FBRWhDLElBQUksQ0FBQ0QsWUFBWTtZQUNmLE9BQU9MLElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQUVDLE9BQU87WUFBMEI7UUFDakU7UUFFQSxNQUFNUiwyREFBaUJBO1FBRXZCLHVEQUF1RDtRQUN2RCxnREFBZ0Q7UUFDaEQsTUFBTVcsU0FBUyxNQUFNViwwREFBVUEsQ0FBQ1csSUFBSSxDQUFDO1lBQUVDLFVBQVVKO1FBQVcsR0FDekRLLElBQUksQ0FBQztZQUFFQyxXQUFXLENBQUM7UUFBRSxHQUNyQkMsS0FBSyxDQUFDLE9BQU8sNENBQTRDO1FBRTVELE9BQU9aLElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUNJO0lBRTlCLEVBQUUsT0FBT0gsT0FBTztRQUNkUyxRQUFRVCxLQUFLLENBQUMsMEJBQTBCQTtRQUN4QyxPQUFPSixJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUVDLE9BQU87UUFBd0I7SUFDL0Q7QUFDRjtBQUVBLHFDQUFxQztBQUNyQyxTQUFTVSxjQUFjQyxTQUFTO0lBQzlCLElBQUksQ0FBQ0EsV0FBVyxPQUFPO0lBQ3ZCLElBQUlBLFVBQVVDLFFBQVEsQ0FBQyxhQUFhRCxVQUFVQyxRQUFRLENBQUMsU0FBUyxPQUFPO0lBQ3ZFLElBQUlELFVBQVVDLFFBQVEsQ0FBQyxZQUFZLE9BQU87SUFDMUMsSUFBSUQsVUFBVUMsUUFBUSxDQUFDLFlBQVksT0FBTztJQUMxQyxJQUFJRCxVQUFVQyxRQUFRLENBQUMsUUFBUSxPQUFPO0lBQ3RDLE9BQU87QUFDVCIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxhbnNodlxcRG93bmxvYWRzXFxtYWlsX3RyYWNrZXJfZW5kcG9pbnRzXFxwYWdlc1xcYXBpXFxldmVudHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY29ubmVjdFRvRGF0YWJhc2UgfSBmcm9tICcuLi8uLi9tb25nb2RiJztcclxuaW1wb3J0IHsgRW1haWxFdmVudCB9IGZyb20gJy4uLy4uL21vZGVscy9FbWFpbEV2ZW50JztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxLCByZXMpIHtcclxuICBpZiAocmVxLm1ldGhvZCAhPT0gJ0dFVCcpIHtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDQwNSkuanNvbih7IGVycm9yOiAnTWV0aG9kIG5vdCBhbGxvd2VkJyB9KTtcclxuICB9XHJcblxyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IGNhbXBhaWduSWQgfSA9IHJlcS5xdWVyeTtcclxuXHJcbiAgICBpZiAoIWNhbXBhaWduSWQpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdDYW1wYWlnbiBJRCBpcyByZXF1aXJlZCcgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgYXdhaXQgY29ubmVjdFRvRGF0YWJhc2UoKTtcclxuXHJcbiAgICAvLyBHZXQgYWxsIGV2ZW50cyBmb3IgdGhlIGNhbXBhaWduLCBzb3J0ZWQgYnkgdGltZXN0YW1wXHJcbiAgICAvLyBGaXg6IFVzZSBjb3JyZWN0IGZpZWxkIGZvciBjYW1wYWlnbiBmaWx0ZXJpbmdcclxuICAgIGNvbnN0IGV2ZW50cyA9IGF3YWl0IEVtYWlsRXZlbnQuZmluZCh7IGNhbXBhaWduOiBjYW1wYWlnbklkIH0pXHJcbiAgICAgIC5zb3J0KHsgdGltZXN0YW1wOiAtMSB9KVxyXG4gICAgICAubGltaXQoMTAwMCk7IC8vIExpbWl0IHRvIGxhc3QgMTAwMCBldmVudHMgZm9yIHBlcmZvcm1hbmNlXHJcblxyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKGV2ZW50cyk7XHJcblxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBldmVudHM6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InIH0pO1xyXG4gIH1cclxufVxyXG5cclxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGdldCBkZXZpY2UgaW5mb1xyXG5mdW5jdGlvbiBnZXREZXZpY2VJbmZvKHVzZXJBZ2VudCkge1xyXG4gIGlmICghdXNlckFnZW50KSByZXR1cm4gJ1Vua25vd24nO1xyXG4gIGlmICh1c2VyQWdlbnQuaW5jbHVkZXMoJ2lQaG9uZScpIHx8IHVzZXJBZ2VudC5pbmNsdWRlcygnaVBhZCcpKSByZXR1cm4gJ2lPUyc7XHJcbiAgaWYgKHVzZXJBZ2VudC5pbmNsdWRlcygnQW5kcm9pZCcpKSByZXR1cm4gJ0FuZHJvaWQnO1xyXG4gIGlmICh1c2VyQWdlbnQuaW5jbHVkZXMoJ1dpbmRvd3MnKSkgcmV0dXJuICdXaW5kb3dzJztcclxuICBpZiAodXNlckFnZW50LmluY2x1ZGVzKCdNYWMnKSkgcmV0dXJuICdNYWMnO1xyXG4gIHJldHVybiAnVW5rbm93bic7XHJcbn1cclxuIl0sIm5hbWVzIjpbImNvbm5lY3RUb0RhdGFiYXNlIiwiRW1haWxFdmVudCIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJtZXRob2QiLCJzdGF0dXMiLCJqc29uIiwiZXJyb3IiLCJjYW1wYWlnbklkIiwicXVlcnkiLCJldmVudHMiLCJmaW5kIiwiY2FtcGFpZ24iLCJzb3J0IiwidGltZXN0YW1wIiwibGltaXQiLCJjb25zb2xlIiwiZ2V0RGV2aWNlSW5mbyIsInVzZXJBZ2VudCIsImluY2x1ZGVzIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./pages/api/events.js\n");

/***/ }),

/***/ "dotenv/config":
/*!********************************!*\
  !*** external "dotenv/config" ***!
  \********************************/
/***/ ((module) => {

module.exports = require("dotenv/config");

/***/ }),

/***/ "mongoose":
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("mongoose");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fevents&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cevents.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();