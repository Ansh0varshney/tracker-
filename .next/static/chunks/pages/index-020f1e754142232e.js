(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(5269)}])},5269:function(e,s,n){"use strict";function a(e,s,n,a,c,t,i){try{var l=e[t](i),r=l.value}catch(d){return void n(d)}l.done?s(r):Promise.resolve(r).then(a,c)}n.r(s),n.d(s,{default:function(){return d}});var c=n(7582),t=n(5893),i=n(7294),l=n(9008),r=n.n(l);function d(){var e,s=(0,i.useState)([]),n=s[0],l=s[1],d=(0,i.useState)({openCount:0,clickCount:0,uniqueOpenersCount:0,topCompanies:[]}),h=d[0],o=d[1],m=(0,i.useState)("events"),x=m[0],j=m[1],p=(0,i.useState)(!0),u=p[0],v=p[1],N=function(){var e,s=(e=function(){var e,s,n;return(0,c.__generator)(this,(function(a){switch(a.label){case 0:v(!0),a.label=1;case 1:return a.trys.push([1,6,,7]),[4,fetch("/api/stats")];case 2:return[4,a.sent().json()];case 3:return e=a.sent(),o(e),[4,fetch("/api/events")];case 4:return[4,a.sent().json()];case 5:return s=a.sent(),l(s),[3,7];case 6:return n=a.sent(),console.error("Error loading dashboard data:",n),[3,7];case 7:return v(!1),[2]}}))},function(){var s=this,n=arguments;return new Promise((function(c,t){var i=e.apply(s,n);function l(e){a(i,c,t,l,r,"next",e)}function r(e){a(i,c,t,l,r,"throw",e)}l(void 0)}))});return function(){return s.apply(this,arguments)}}();(0,i.useEffect)((function(){N();var e=setInterval(N,3e5);return function(){return clearInterval(e)}}),[]);var b=function(e){try{var s=new URL(e);return s.hostname+("/"!==s.pathname?s.pathname:"")}catch(n){return e}};return(0,t.jsxs)("div",{children:[(0,t.jsxs)(r(),{children:[(0,t.jsx)("title",{children:"Email Tracking Dashboard"}),(0,t.jsx)("meta",{name:"description",content:"Email tracking system dashboard"}),(0,t.jsx)("link",{href:"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css",rel:"stylesheet"}),(0,t.jsx)("link",{href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css",rel:"stylesheet"})]}),(0,t.jsx)("div",{className:"header",children:(0,t.jsx)("div",{className:"container",children:(0,t.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,t.jsxs)("h1",{children:[(0,t.jsx)("i",{className:"fas fa-chart-line me-3"}),"Email Tracking Dashboard"]}),(0,t.jsxs)("button",{id:"refreshButton",className:"btn btn-primary",onClick:N,children:[(0,t.jsx)("i",{className:"fas fa-sync-alt me-2"}),"Refresh Data"]})]})})}),(0,t.jsxs)("div",{className:"container mb-5",children:[(0,t.jsxs)("div",{className:"row mb-4",id:"statsCards",children:[(0,t.jsx)("div",{className:"col-md-3",children:(0,t.jsxs)("div",{className:"card stats-card",children:[(0,t.jsx)("i",{className:"fas fa-envelope-open"}),(0,t.jsx)("div",{className:"number",children:h.openCount}),(0,t.jsx)("div",{className:"label",children:"Total Opens"})]})}),(0,t.jsx)("div",{className:"col-md-3",children:(0,t.jsxs)("div",{className:"card stats-card",children:[(0,t.jsx)("i",{className:"fas fa-mouse-pointer"}),(0,t.jsx)("div",{className:"number",children:h.clickCount}),(0,t.jsx)("div",{className:"label",children:"Total Clicks"})]})}),(0,t.jsx)("div",{className:"col-md-3",children:(0,t.jsxs)("div",{className:"card stats-card",children:[(0,t.jsx)("i",{className:"fas fa-users"}),(0,t.jsx)("div",{className:"number",children:h.uniqueOpenersCount}),(0,t.jsx)("div",{className:"label",children:"Unique Recipients"})]})}),(0,t.jsx)("div",{className:"col-md-3",children:(0,t.jsxs)("div",{className:"card stats-card",children:[(0,t.jsx)("i",{className:"fas fa-building"}),(0,t.jsx)("div",{className:"number",children:(null===(e=h.topCompanies)||void 0===e?void 0:e.length)||0}),(0,t.jsx)("div",{className:"label",children:"Active Companies"})]})})]}),(0,t.jsxs)("ul",{className:"nav nav-tabs mb-4",role:"tablist",children:[(0,t.jsx)("li",{className:"nav-item",children:(0,t.jsx)("button",{className:"nav-link ".concat("events"===x?"active":""),onClick:function(){return j("events")},children:"All Events"})}),(0,t.jsx)("li",{className:"nav-item",children:(0,t.jsx)("button",{className:"nav-link ".concat("opens"===x?"active":""),onClick:function(){return j("opens")},children:"Opens"})}),(0,t.jsx)("li",{className:"nav-item",children:(0,t.jsx)("button",{className:"nav-link ".concat("clicks"===x?"active":""),onClick:function(){return j("clicks")},children:"Clicks"})}),(0,t.jsx)("li",{className:"nav-item",children:(0,t.jsx)("button",{className:"nav-link ".concat("companies"===x?"active":""),onClick:function(){return j("companies")},children:"Companies"})})]}),(0,t.jsxs)("div",{className:"tab-content",children:["events"===x&&(0,t.jsx)("div",{className:"tab-pane fade show active",children:(0,t.jsx)("div",{className:"card",children:(0,t.jsxs)("div",{className:"card-body",children:[(0,t.jsx)("h5",{className:"card-title mb-3",children:"Recent Activity"}),(0,t.jsx)("div",{className:"table-responsive",children:(0,t.jsxs)("table",{className:"table table-striped",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Type"}),(0,t.jsx)("th",{children:"Recipient"}),(0,t.jsx)("th",{children:"Company"}),(0,t.jsx)("th",{children:"Details"}),(0,t.jsx)("th",{children:"Time"})]})}),(0,t.jsx)("tbody",{children:u?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:"5",className:"text-center",children:"Loading data..."})}):0===n.length?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:"5",className:"text-center",children:"No events recorded yet"})}):n.map((function(e,s){var n=new Date(e.timestamp).toLocaleString(),a="open"===e.type?"Email opened":"Clicked: ".concat(b(e.linkClicked));return(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsx)("span",{className:"badge ".concat("open"===e.type?"badge-open":"badge-click"),children:e.type.toUpperCase()})}),(0,t.jsx)("td",{children:e.recipient}),(0,t.jsx)("td",{children:(0,t.jsx)("span",{className:"badge badge-company",children:e.company})}),(0,t.jsx)("td",{children:a}),(0,t.jsx)("td",{children:n})]},e._id||s)}))})]})})]})})}),"opens"===x&&(0,t.jsx)("div",{className:"tab-pane fade show active",children:(0,t.jsx)("div",{className:"card",children:(0,t.jsxs)("div",{className:"card-body",children:[(0,t.jsx)("h5",{className:"card-title mb-3",children:"Open Events"}),(0,t.jsx)("div",{className:"table-responsive",children:(0,t.jsxs)("table",{className:"table table-striped",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Recipient"}),(0,t.jsx)("th",{children:"Company"}),(0,t.jsx)("th",{children:"Email ID"}),(0,t.jsx)("th",{children:"Time"}),(0,t.jsx)("th",{children:"Device"})]})}),(0,t.jsx)("tbody",{children:u?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:"5",className:"text-center",children:"Loading data..."})}):function(){var e=n.filter((function(e){return"open"===e.type}));return 0===e.length?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:"5",className:"text-center",children:"No opens recorded yet"})}):e.map((function(e,s){var n,a=new Date(e.timestamp).toLocaleString(),c=(n=e.userAgent)?n.includes("iPhone")||n.includes("iPad")?"iOS":n.includes("Android")?"Android":n.includes("Windows")?"Windows":n.includes("Mac")?"Mac":"Unknown":"Unknown";return(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:e.recipient}),(0,t.jsx)("td",{children:(0,t.jsx)("span",{className:"badge badge-company",children:e.company})}),(0,t.jsx)("td",{children:e.emailId}),(0,t.jsx)("td",{children:a}),(0,t.jsx)("td",{children:c})]},e._id||s)}))}()})]})})]})})}),"clicks"===x&&(0,t.jsx)("div",{className:"tab-pane fade show active",children:(0,t.jsx)("div",{className:"card",children:(0,t.jsxs)("div",{className:"card-body",children:[(0,t.jsx)("h5",{className:"card-title mb-3",children:"Click Events"}),(0,t.jsx)("div",{className:"table-responsive",children:(0,t.jsxs)("table",{className:"table table-striped",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Recipient"}),(0,t.jsx)("th",{children:"Company"}),(0,t.jsx)("th",{children:"Link"}),(0,t.jsx)("th",{children:"Time"})]})}),(0,t.jsx)("tbody",{children:u?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:"4",className:"text-center",children:"Loading data..."})}):function(){var e=n.filter((function(e){return"click"===e.type}));return 0===e.length?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:"4",className:"text-center",children:"No clicks recorded yet"})}):e.map((function(e,s){var n=new Date(e.timestamp).toLocaleString();return(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:e.recipient}),(0,t.jsx)("td",{children:(0,t.jsx)("span",{className:"badge badge-company",children:e.company})}),(0,t.jsx)("td",{children:(0,t.jsx)("a",{href:e.linkClicked,target:"_blank",rel:"noopener noreferrer",children:b(e.linkClicked)})}),(0,t.jsx)("td",{children:n})]},e._id||s)}))}()})]})})]})})}),"companies"===x&&(0,t.jsx)("div",{className:"tab-pane fade show active",children:(0,t.jsx)("div",{className:"card",children:(0,t.jsxs)("div",{className:"card-body",children:[(0,t.jsx)("h5",{className:"card-title mb-3",children:"Top Companies"}),(0,t.jsx)("div",{className:"table-responsive",children:(0,t.jsxs)("table",{className:"table table-striped",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Company"}),(0,t.jsx)("th",{children:"Opens"}),(0,t.jsx)("th",{children:"Clicks"}),(0,t.jsx)("th",{children:"Engagement"})]})}),(0,t.jsx)("tbody",{children:u?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:"4",className:"text-center",children:"Loading data..."})}):0===h.topCompanies.length?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:"4",className:"text-center",children:"No company data available"})}):h.topCompanies.map((function(e,s){return(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsx)("span",{className:"badge badge-company",children:e.company})}),(0,t.jsx)("td",{children:e.opens}),(0,t.jsx)("td",{children:e.clicks}),(0,t.jsx)("td",{children:(0,t.jsx)("strong",{children:e.engagement})})]},s)}))})]})})]})})})]})]})]})}},9008:function(e,s,n){e.exports=n(5443)}},function(e){e.O(0,[774,888,179],(function(){return s=5557,e(e.s=s);var s}));var s=e.O();_N_E=s}]);